$.widget("sguinfocom.TreeFilterInput",{treeWidget:null,delayBetweenSearch:500,_create:function(){var e=this;e.treeWidget=$("#"+e.options.treeViewId),e.inputEl=e.element.find("input"),e.clearEl=e.element.find(".close"),e._initEvents()},_escapeRegExp:function(e){var t=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],i=RegExp("["+t.join("\\")+"]","g");return e.replace(i,"\\$&")},_initEvents:function(){var e=this,t=!1,i=!1,n=e.inputEl.val(),l=e.treeWidget;e.clearEl.click(function(){e.inputEl.val("").keyup()}),e.inputEl.keyup(function(){t&&(clearTimeout(t),t=!1),t=setTimeout(function(){if(t=!1,l.find(".list-group-item").css("display",""),e.inputEl.val().length){e._hideSearchIcon(),l.treeview("collapseAll");var a=l.treeview("search",[e._escapeRegExp(e.inputEl.val()),{ignoreCase:!0,exactMatch:!1,revealResults:!0}]);l.find(".list-group-item").hide(),a.map(function(t){$(t.$el).show(),e._expandAllParents([t])}),a.length?(n=e.inputEl.val(),i=!1):(e.inputEl.val(n).keyup(),i=!0)}else{e._showSearchIcon(),i=!1,l.treeview("clearSearch").treeview("collapseAll");var s=l.treeview("getSelected");e._expandAllParents(s)}},e.delayBetweenSearch)}),e.inputEl.keypress(function(){if(i)return e.inputEl.val(n),!1})},_showSearchIcon:function(){var e=this;console.debug("show search"),e.clearEl.removeClass("fa-times").addClass("fa-search")},_hideSearchIcon:function(){var e=this;console.debug("hide search"),e.clearEl.addClass("fa-times").removeClass("fa-search")},_expandAllParents:function(e){var t=this,i=t.treeWidget;if(e.length){if(e=e[0],void 0===e.$el)return;e.$el.css("display","");for(var n=[];(e=i.treeview("getParents",e))&&e.length;)e.map(function(e){void 0!==e.$el&&$(e.$el).css("display","")}),n[n.length]=e;n.reverse().map(function(e){i.treeview("expandNode",e)})}}});