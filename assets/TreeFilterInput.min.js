$.widget("sguinfocom.TreeFilterInput",{treeWidget:null,delayBetweenSearch:500,_create:function(){var a=this;a.treeWidget=$("#"+a.options.treeViewId);a.inputEl=a.element.find("input");a.clearEl=a.element.find(".close");a._initEvents()},_escapeRegExp:function(c){var a=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],b=RegExp("["+a.join("\\")+"]","g");return c.replace(b,"\\$&")},_initEvents:function(){var b=this,a=false,d=false,e=b.inputEl.val(),c=b.treeWidget;b.clearEl.click(function(){b.inputEl.val("").keyup()});b.inputEl.keyup(function(){if(a){clearTimeout(a);a=false}a=setTimeout(function(){a=false;c.find(".list-group-item").css("display","");if(b.inputEl.val().length){b._hideSearchIcon();c.bstreeview("collapseAll");var g=c.bstreeview("search",[b._escapeRegExp(b.inputEl.val()),{ignoreCase:true,exactMatch:false,revealResults:true}]);c.find(".list-group-item").hide();g.map(function(h){$(h.$el).show();b._expandAllParents([h])});if(!g.length){b.inputEl.val(e).keyup();d=true}else{e=b.inputEl.val();d=false}}else{b._showSearchIcon();d=false;c.bstreeview("clearSearch").bstreeview("collapseAll");var f=c.bstreeview("getSelected");b._expandAllParents(f)}},b.delayBetweenSearch)});b.inputEl.keypress(function(){if(d){b.inputEl.val(e);return false}})},_showSearchIcon:function(){var a=this;console.debug("show search");a.clearEl.removeClass("glyphicon-remove").addClass("glyphicon-search")},_hideSearchIcon:function(){var a=this;console.debug("hide search");a.clearEl.addClass("glyphicon-remove").removeClass("glyphicon-search")},_expandAllParents:function(a){var c=this,d=c.treeWidget;if(a.length){a=a[0];if(typeof a.$el==="undefined"){return}a.$el.css("display","");var b=[];while((a=d.bstreeview("getParents",a))&&a.length){a.map(function(e){if(typeof e.$el==="undefined"){return}$(e.$el).css("display","")});b[b.length]=a}b.reverse().map(function(e){d.bstreeview("expandNode",e)})}}});